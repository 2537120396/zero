document.addEventListener("DOMContentLoaded",function(){var box=document.getElementsByName("box");var body=document.body,html=document.documentElement;var itv,height=document.body.offsetHeight;var page=parseInt(scrollTop()/height);var nav1=document.getElementById("nav1");var nav2=document.getElementById("nav2");var nav3=document.getElementById("nav3");var nav4=document.getElementById("nav4");var ul=document.getElementsByTagName("ul")[0];addEventListener("resize",onresize,false);onresize();document.body.addEventListener("onwheel" in document?"wheel":"mousewheel",function(e){clearTimeout(itv);itv=setTimeout(function(){var delta=e.wheelDelta/120||-e.deltaY/3;page-=delta;var max=parseInt(document.body.scrollHeight/height)-1;if(page<0){page=0}if(page>max){scrollTop(document.body.scrollHeight);return page=max}for(var i=0;i<box.length;i++){box[i].style.opacity=0}move()},100);e.preventDefault()});function move(){var value=height*page;var diff=scrollTop()-value;if(body.offsetWidth<760){ul.style.display="none"}else{active(page)}(function callee(){diff=parseInt(diff/1.1);scrollTop(value+diff);if(diff){itv=setTimeout(callee,16)}else{fin()}})()}var btn=document.getElementById("btn");btn.onclick=function(e){ul.style.display="inline";e.stopPropagation()};ul.onclick=function(event){event.stopPropagation()};document.onclick=function(){if(body.offsetWidth<760){ul.style.display="none"}};function onresize(){height=body.offsetHeight;move()}function scrollTop(v){if(v==null){return Math.max(body.scrollTop,html.scrollTop)}else{body.scrollTop=html.scrollTop=v}}function fin(){var n=0;(function fadeIn(){n+=0.01;for(var i=0;i<box.length;i++){box[i].style.opacity=n}if(n<1){active(page);itv=setTimeout(fadeIn,16)}})()}function active(page){if(page==1){nav1.classList.add("active");nav2.classList.remove("active");nav3.classList.remove("active");nav4.classList.remove("active")}else{if(page==2){nav1.classList.remove("active");nav2.classList.add("active");nav3.classList.remove("active");nav4.classList.remove("active")}else{if(page==3){nav1.classList.remove("active");nav2.classList.remove("active");nav3.classList.add("active");nav4.classList.remove("active")}else{if(page==4){nav1.classList.remove("active");nav2.classList.remove("active");nav3.classList.remove("active");nav4.classList.add("active")}else{nav1.classList.remove("active");nav2.classList.remove("active");nav3.classList.remove("active");nav4.classList.remove("active")}}}}}function text(id,font,color,txt,x,y){var can=document.getElementById(id);var cans=can.getContext("2d");cans.font=font;cans.textAlign="left";cans.textBaseline="top";cans.fillStyle=color;cans.fillText(txt,x,y)}var font="bold 20px consolas";text("php",font,"#222","php:70%",60,70);text("html-css",font,"#333","html",72,50);text("html-css",font,"#333","css",76,70);text("html-css",font,"#333","60%",77,90);text("js",font,"#333","js:50%",63,70);text("other",font,"#6cf","jsp",78,50);text("other",font,"#6cf","c++",78,70);text("other",font,"#6cf","有了解",65,90);nav1.onclick=function(){page=1;move()};nav2.onclick=function(){page=2;move()};nav3.onclick=function(){page=3;move()};nav4.onclick=function(){page=4;move()}});function draw(canvasId,data_arr,color_arr,x,y,r){var pi2=Math.PI*2;var canvas=document.getElementById(canvasId);var c=canvas.getContext("2d");c.font="12px Times New Roman";var startAgl=0;var agl;for(var i=0;i<data_arr.length;i++){agl=data_arr[i]*pi2+startAgl;c.fillStyle=color_arr[i];c.beginPath();c.moveTo(x,y);c.arc(x,y,r,startAgl,agl,false);c.lineTo(x,y);c.stroke();c.fill();startAgl=agl}}var php=[0.7,0.3],htmlCss=[0.6,0.4],js=[0.5,0.5];var colors=["#e00","#6cf"];draw("php",php,colors,100,80,60);draw("php",[1],["#6cc"],100,80,54);draw("html-css",htmlCss,colors,100,80,60);draw("html-css",[1],["#6cc"],100,80,54);draw("js",js,colors,100,80,60);draw("js",[1],["#6cc"],100,80,54);draw("other",[1],colors,100,80,60);function line(id,width,color){var canvas=document.getElementById(id);var context=canvas.getContext("2d");context.lineWidth=width;context.strokeStyle=color;context.beginPath();context.moveTo(150,0);context.lineTo(150,400);context.lineTo(150,10);context.lineTo(0,10);context.lineTo(150,10);context.lineTo(150,70);context.lineTo(300,70);context.lineTo(150,70);context.lineTo(150,110);context.lineTo(0,110);context.stroke()}line("experience",1,"#6cf");var title=document.getElementById("interest-title");title.onclick=function(){var interest=document.getElementById("interest");interest.style.opacity=0;var html="<li>画画：正在自学漫画的画法，现在能画出不会太崩的人物</li><li>音乐：我想自己制作相关视频发布，因此尝试了下AE，但由于我现在硬件条件不足（笔记本带不动），只学习了最基础的部分，已搁置很久。囧-_-!</li><li>ACGN</li>";interest.innerHTML=html;function x(){interest.innerHTML=""}var n=0;(function i(){n+=0.01;interest.style.opacity=n;if(n<1){setTimeout(i,16)}else{setTimeout(x,5000)}})()};var more=document.getElementById("more");var num=1;var com=document.getElementById("comment");more.onclick=function(){num+=1;var xhr=new XMLHttpRequest();xhr.onreadystatechange=function(){if(this.readyState==4){var obj=eval("("+this.responseText+")");
var arr=[];var n=obj.length;if(obj[obj.length-1]=="n"){more.style.display="none";n-=1}for(var i=0;i<n;i++){var d=new Date(obj[i]["create_time"]);arr.push("<li>"+obj[i]["user_name"]+":"+obj[i]["comment"]+'  <span class="grey">'+formatDate(d)+"</span></li>")}com.innerHTML=arr.join("")}};xhr.open("POST","/index/vc/append",true);xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");xhr.send(num=num);function formatDate(now){var year=now.getFullYear(),month=now.getMonth()+1,date=now.getDate(),hour=now.getHours(),minute=now.getMinutes(),second=now.getSeconds();return year+"/"+month+"/"+date+" "+hour+":"+minute}return false};